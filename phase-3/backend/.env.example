# ============================================================================
# Backend Environment Configuration
# Hackathon II Phase-3: Todo Application with AI Chatbot
# ============================================================================

# ----------------------------------------------------------------------------
# JWT Verification (CRITICAL - Must Match Frontend)
# ----------------------------------------------------------------------------
# This secret is used to verify JWT tokens issued by Better Auth on the frontend.
# MUST be IDENTICAL to the BETTER_AUTH_SECRET in frontend/.env
# Generate a secure random string (minimum 32 characters):
#   - Node.js: require('crypto').randomBytes(32).toString('hex')
#   - Python: python -c "import secrets; print(secrets.token_hex(32))"
#   - Online: https://generate-secret.vercel.app/32
BETTER_AUTH_SECRET=your-secret-key-minimum-32-characters-long-random-string

# ----------------------------------------------------------------------------
# Database Connection (PostgreSQL)
# ----------------------------------------------------------------------------
# PostgreSQL connection string for Neon Serverless or local PostgreSQL.
# Format: postgresql://[user]:[password]@[host]:[port]/[database]?sslmode=require
#
# Neon Serverless example:
#   postgresql://user:password@ep-cool-darkness-123456.us-east-2.aws.neon.tech/neondb?sslmode=require
#
# Local PostgreSQL example:
#   postgresql://postgres:password@localhost:5432/hackathon_phase3
#
# Connection pooling is configured in app/database.py:
#   - pool_size: 10 connections
#   - max_overflow: 20 additional connections
DATABASE_URL=postgresql://user:password@host:5432/hackathon_phase2

# ----------------------------------------------------------------------------
# CORS Configuration
# ----------------------------------------------------------------------------
# Primary frontend URL for CORS whitelist. Must match the exact origin of your frontend.
# Development: http://localhost:3000
# Production: https://your-domain.com (no trailing slash)
FRONTEND_URL=http://localhost:3000

# Additional allowed origins for CORS (comma-separated, optional)
# Use this to allow multiple frontend URLs for different environments.
# Examples:
#   - Production + Staging: https://app.example.com,https://staging.example.com
#   - Vercel deployments: https://your-app.vercel.app,https://your-app-git-main.vercel.app
#   - Multiple domains: https://app1.com,https://app2.com
# Leave empty for development (only FRONTEND_URL will be allowed)
ALLOWED_ORIGINS=

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
# Host and port for the FastAPI server
# HOST: 0.0.0.0 allows external connections (required for Docker/production)
#       127.0.0.1 restricts to localhost only (development)
# PORT: Default 8000, change if port conflict occurs
HOST=0.0.0.0
PORT=8000

# ----------------------------------------------------------------------------
# Phase-3: AI Chatbot Configuration (OpenRouter API)
# ----------------------------------------------------------------------------
# OpenRouter API Key (REQUIRED for Phase-3 chat functionality)
# Get your API key from: https://openrouter.ai/keys
# OpenRouter provides access to multiple LLM providers (Google, OpenAI, Anthropic, etc.)
# Free tier available with rate limits.
OPENROUTER_API_KEY=your-openrouter-api-key-here

# AI Model Selection
# Choose from OpenRouter's available models:
#   - google/gemini-pro (default, fast, cost-effective)
#   - google/gemini-2.0-flash-exp (latest Gemini, experimental)
#   - openai/gpt-3.5-turbo (OpenAI, balanced)
#   - openai/gpt-4 (OpenAI, most capable, higher cost)
#   - anthropic/claude-3-haiku (Anthropic, fast)
#   - anthropic/claude-3-sonnet (Anthropic, balanced)
#
# See full list: https://openrouter.ai/models
AI_MODEL=google/gemini-pro

# ----------------------------------------------------------------------------
# Setup Instructions
# ----------------------------------------------------------------------------
# 1. Copy this file to .env in the same directory:
#    cp .env.example .env
#
# 2. Update BETTER_AUTH_SECRET:
#    - MUST match frontend/.env BETTER_AUTH_SECRET exactly
#    - Generate with: python -c "import secrets; print(secrets.token_hex(32))"
#
# 3. Update DATABASE_URL:
#    - For Neon: Copy connection string from Neon dashboard
#    - For local: postgresql://postgres:password@localhost:5432/your_db_name
#    - Run migrations: python -c "import asyncio; from app.database import apply_migrations; asyncio.run(apply_migrations())"
#
# 4. Update OPENROUTER_API_KEY:
#    - Sign up at https://openrouter.ai
#    - Create API key at https://openrouter.ai/keys
#    - Paste key here (starts with "sk-or-v1-...")
#
# 5. Choose AI_MODEL:
#    - Default google/gemini-pro works well for most use cases
#    - Change if you need different capabilities or pricing
#
# 6. Update FRONTEND_URL for production:
#    - Development: http://localhost:3000
#    - Production: https://your-domain.com (no trailing slash)
#
# 7. Configure ALLOWED_ORIGINS for multiple environments (optional):
#    - Add comma-separated list of additional frontend URLs
#    - Example: ALLOWED_ORIGINS=https://app.vercel.app,https://staging.vercel.app
#    - Leave empty for development (only FRONTEND_URL will be allowed)
#
# 8. SECURITY WARNING:
#    - NEVER commit .env to version control
#    - .env is in .gitignore by default
#    - Rotate secrets if accidentally exposed
#
# ----------------------------------------------------------------------------
# Verification
# ----------------------------------------------------------------------------
# Test configuration:
#   1. Start backend: uvicorn app.main:app --reload
#   2. Check logs for startup errors
#   3. Visit http://localhost:8000/docs for API documentation
#   4. Test /api/chat endpoint with valid JWT token
#
# Common issues:
#   - "BETTER_AUTH_SECRET not set": Copy from frontend/.env
#   - "DATABASE_URL not set": Add PostgreSQL connection string
#   - "OPENROUTER_API_KEY not set": Get key from https://openrouter.ai/keys
#   - CORS errors: Ensure FRONTEND_URL matches frontend origin exactly

